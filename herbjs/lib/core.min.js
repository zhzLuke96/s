!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.herb=t():e.herb=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=27)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=Symbol("__IS_STATE__");t.isState=e=>e[o],t.useState=e=>{const t=Object.create(null);let n=e;function c(e){n=e}function i(){return n}return Object.defineProperties(t,{value:{enumerable:!0,set:c,get:i},val:{enumerable:!0,set:c,get:i},v:{enumerable:!0,set:c,get:i}}),t[o]=!0,r.reactive(t)},t.Stateify=e=>t.isState(e)?e:t.useState(e);const c=e=>e,i=e=>{let t=0;return n=>new Promise((r,o)=>{const c=Date.now();c-t<e?o():(t=c,r(n))})};t.useValue=(e,n=c,o=c,s=-1)=>{const a=t.useState(n(e.v)),l=i(s),u=i(s),f=t=>e.v=t,d=e=>a.v=e;return r.effect(()=>l(e.v).then(n).then(d).catch(c)),r.effect(()=>u(a.v).then(o).then(f).then(n).then(d).catch(c)),a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9),o=n(4),c=new WeakMap,i=new WeakMap,s=[],a=new WeakMap;function l(e,t=null){let n;return n=c.get(e),n||(i.get(e)?e:(n=new Proxy(e,r.baseHandler(t)),c.set(e,n),i.set(n,e),n))}function u(e,t){const n=a.get(e);if(void 0===n)return;const r=new Set,c=new Set;if(t){const e=n.get(t);if(!e)return;e.forEach(e=>e.computed?c.add(e):r.add(e))}const i=e=>{e.scheduler?e.scheduler(e):o.nextTick(e)};c.forEach(i),r.forEach(i)}function f(e,t={}){const n=function(e,t){const n=(...t)=>function(e,t,n){if(-1===s.indexOf(e))try{return s.push(e),t(...n)}finally{s.pop()}}(n,e,t);return n.deps=[],n.computed=t.computed,n.lazy=t.lazy,n.scheduler=t.scheduler,n.active=!1,n}(e,t);return t.lazy||n(),n}t.getToRaw=function(e){return i.get(e)||e},t.reactive=l,t.trigger=u,t.track=function(e,t){const n=s[s.length-1];if(!n)return;let r=a.get(e);void 0===r&&(r=new Map,a.set(e,r));let o=r.get(t);void 0===o&&(o=new Set,r.set(t,o)),o.has(n)||(o.add(n),n.deps.push(o))},t.effect=f,t.computed=function(e,t={}){let n,r=!0;const o=f(e,Object.assign({computed:!0,lazy:!0,scheduler(){r=!0,u(c,"value")}},t)),c={effect:o,get value(){return r&&(n=o(),r=!1),n}};return l(c)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),o=n(1);t.useEffect=e=>r.nextTick(()=>o.effect(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.getFuncVal=(e,n=0)=>n>=20?e:e instanceof Function?t.getFuncVal(e(),n+1):e,t.GetValue=function e(n){return n instanceof Function?e(t.getFuncVal(n)):"object"!=typeof n?n:(n=n,r.isState(n)?e([n.value,n.val,n.v][0]):n)};t.isDef=(e,...t)=>(Array.isArray(e)||(e=[e]),!!(e=[...e,...t]).length&&e.reduce((e,t)=>e&&(e=>null!=e)(t),!0));const o=e=>{for(let t,n,r=e.length;r;t=~~(Math.random()*r),n=e[--r],e[r]=e[t],e[t]=n);return e},c=e=>o(e.split("")).join("");t.UniqueId=(e="_",t=6,n=3)=>o(Array.from(`${c(parseInt(performance.now().toString().replace(".",""),10).toString(16))}${c(Date.now().toString(16))}${c(Math.random().toString(16).slice(2))}`.matchAll(new RegExp(`.{${t}}`,"g")))).slice(0,n).join(e),t.throttle=(e,t=500)=>{let n=!0;return(...r)=>{n&&(n=!1,setTimeout(()=>{e.apply(null,r),n=!0},t))}},t.debounce=(e,t=500)=>{let n=null;return(...r)=>{clearTimeout(n),n=setTimeout(()=>{e.apply(null,r)},t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=new WeakSet,o=Promise&&Promise.resolve();let c;c=o?e=>o.then(()=>e()):e=>(window.setImmediate||window.setTimeout)(t=>e(),0),t.nextTick=e=>{if(!r.has(e))return r.add(e),c(e).then(()=>r.delete(e))};const i=new WeakMap;t.nextTickWithKey=(e,t)=>{i.has(e)||c(()=>(e=>{c(()=>{i.get(e)(),i.delete(e)})})(e)),i.set(e,t)}},function(e,t,n){"use strict";function r(e){return null!=e}function o(e){return null==e}Object.defineProperty(t,"__esModule",{value:!0}),t.__DEV__=!1,t.__IE__DEV__=!1,t.isDOM="function"==typeof Node?e=>e instanceof Node:e=>e&&"object"==typeof e&&e.nodeType&&"string"==typeof e.nodeName,t.exclude=function(e,t){(t=t||[]).push("constructor","__proto__");const n=Object.create(null);for(const r in e){if(-1!==t.indexOf(r))continue;const o=e[r];n[r]=o}const r=Object.getPrototypeOf(e);return Object.getOwnPropertyNames(r).forEach(r=>{if(-1!==t.indexOf(r))return;const o=e[r];n[r]=o}),n},t.ctxCall=function(e){return new Function("ctx","with(ctx){return ("+e+")}")},t.nodeToFragment=function(e){const t=document.createDocumentFragment();let n;for(;n=e.firstChild,n;)t.appendChild(n),n.$lastParentNode=e;return t},t.isElementNode=function(e){return 1===e.nodeType},t.isTextNode=function(e){return 3===e.nodeType},t.objectHash=function(e){const t=JSON.stringify(e);let n=0;for(let e=0;e<t.length;e++){n=(n<<5)-n+t.charCodeAt(e),n&=n}return n},t.likeHash=function(e,t,n=.8){const r=e+"",o=t+"";let c=(e+"").length;return c=Math.ceil(n*c),r.slice(0,c)===o.slice(0,c)},t.isDef=r,t.isUnDef=o,t.isDefAll=function(e,...t){return Array.isArray(e)||(e=[e]),Array.isArray(t)&&(e=e.concat(t)),!!e.length&&e.reduce((e,t)=>e&&r(t),!0)},t.isUnDefAll=function(e,...t){return Array.isArray(e)||(e=[e]),Array.isArray(t)&&(e=e.concat(t)),!!e.length&&e.reduce((e,t)=>e&&o(t),!0)};const c=navigator.userAgent,i=c.indexOf("compatible")>-1&&c.indexOf("MSIE")>-1;t.isEdge=c.indexOf("Edge")>-1&&!i,t.randID=function(){return Math.ceil(Math.random()*Number.MAX_SAFE_INTEGER)};const s=Object.prototype.toString;t.isType=function(e){return t=>s.call(t)===e};t.UniqueId=()=>"xxxxxxxx-xxxx".replace(/[xy]/g,e=>(16*Math.random()|0).toString(16)),t.flatten=function e(t){return t.reduce((t,n)=>t.concat(Array.isArray(n)?e(n):n),[])},t.FuncType=e=>e?e.constructor.name:"",t.isAsyncFunction=e=>"AsyncFunction"===t.FuncType(e),t.isGeneratorFunction=e=>"GeneratorFunction"===t.FuncType(e),t.isAsyncGeneratorFunction=e=>"AsyncGeneratorFunction"===t.FuncType(e)},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1);t.baseHandler=e=>({get(e,t){const n=Reflect.get(e,t);return r.track(e,t),null!==(o=n)&&"object"==typeof o?r.reactive(n,{target:e,key:t}):n;var o},set(t,n,o,c){const i=t[n],s=r.getToRaw(o),a=((e,t)=>Object.prototype.hasOwnProperty.call(e,t))(t,n),l=Reflect.set(t,n,o,c);return a?s!==i&&(e?r.trigger(r.getToRaw(e.target),e.key):r.trigger(r.getToRaw(t),n)):e?r.trigger(r.getToRaw(e.target),e.key):r.trigger(r.getToRaw(t),n),l}})},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(28),o=n(29);t.html=(e,...t)=>o.render(r.html(Array.from(e),...t))},,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13);t.html=r.html;var o=n(0);t.useState=o.useState;var c=n(2);t.useEffect=c.useEffect},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5);t.genID=()=>(~~(6*Math.random()+10)).toString(16)+"xxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)});const o=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/,c=(e,n)=>`[${n||"$$"}:${e||t.genID()}]`,i=Symbol("HtmlSymbol");t.isHTML=e=>"object"==typeof e&&e[i];let s=null;t.html=(e,...n)=>{const a=function(e,t){const n=[];for(let r=0;r<e.length;r++){const c=e[r],i=o.exec(c);if(i){const e=i[2],o=t[r],s=c.substring(0,i.index);s&&n.push(s),n.push({key:e,val:o})}else n.push(c),r<t.length&&n.push(t[r])}return n}(e,n);let l="";const u=new Map;for(const e of a){const n=t.genID();switch(typeof e){case"string":l+=e;break;case"function":u.set(n,e),l+=c(n,"text");break;case"object":if(r.isDOM(e)){u.set(n,e),l+=c(n,"text");break}if(Object.hasOwnProperty.call(e,"val")&&Object.hasOwnProperty.call(e,"key")){u.set(n,e.val),l+=` ${e.key}=${c(n,"attr")} `;break}if(Array.isArray(e)){u.set(n,e),l+=c(n,"arr");break}u.set(n,e),l+=` ${n}=${c(n,"obj")} `}}return{vdom:(f=l,function e(t){return{tag:t.nodeName.toLowerCase(),type:t.nodeType,attrs:t.attributes?Array.from(t.attributes).map(e=>({key:e.name||e.nodeName,type:e.nodeType,val:e.value||e.nodeValue||e.textContent})):[],child:t.childNodes?Array.from(t.childNodes).map(t=>e(t)):[],content:3===t.nodeType?t.nodeValue||t.textContent:null}}((s||(s=document.createElement("template")),s.innerHTML=f,s).content)),vmap:u,[i]:!0};var f}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5),o=n(3),c=n(0),i=n(1),s=n(30),a=/\[(.+?):(\w+?)\]/g,l=/^\[(.+?):(\w+?)\]$/;t.render=e=>{const{vdom:t,vmap:n}=e;return()=>{const{$frag:e,depFuncs:r}=function(e,t){const n=document.createDocumentFragment();let r=[];for(const o of e.child){if(1===o.type){const{elem:e,dFns:c}=m(o,t);n.appendChild(e),r=r.concat(c)}if(3===o.type){const e=h(o.content,t,n);r=r.concat(e)}}return{$frag:n,depFuncs:r}}(t,n);return r.forEach(e=>i.effect(e)),e}};const u=/^\n+$/,f=e=>{const t=e.toString();if(u.test(t))return null;const n=e.toString().replace(/^[ \t\n]+?|[ \t\n]+?$/g," ");return document.createTextNode(n)},d=(e,t)=>{const n=f(t);n&&e.appendChild(n)},p=document.createElement("div");function h(e,t,n){const r=[];return function(e,t,n=(e=>e)){const r=[];let o=null,c=0;for(;o=e.exec(t);){const n=t.slice(c,o.index);r.push(n),c=e.lastIndex;const i=o[0];r.push(i)}if(c!==t.length){const e=t.slice(c);r.push(e)}r.map(n)}(a,e,e=>{if(0===e.length)return;const[i,a]=e.slice(1,-1).split(":");!function e(t,i=""){switch(typeof t){case"undefined":return void d(n,i);case"string":return void d(n,t);case"object":if(null===t)return void((e,t)=>{p.innerHTML=t;const n=Array.from(p.childNodes).find(e=>3===e.nodeType);n&&e.appendChild(n)})(n,"&nbsp;");if(c.isState(t)){const e=document.createTextNode("");return void r.push(()=>{e.textContent=o.GetValue(t)})}return t instanceof DocumentFragment?void n.appendChild(t):Array.isArray(t)?void t.forEach(t=>e(t)):void 0;case"function":const a=t();if(a instanceof DocumentFragment)return void n.appendChild(a);const l=s.NewFrag(n);if(Array.isArray(a))return void r.push(()=>{const e=t().map(e=>{if("string"==typeof e||e instanceof String)return f(e);if(e instanceof Function){const t=e();if(t instanceof DocumentFragment)return t;if("string"==typeof t||t instanceof String)return f(t)}}).filter(e=>e);l.replace(e)});const u=document.createTextNode("");let h=null;return void r.push(()=>{const e=t();if(e===h)return;if("function"!=typeof e){if(l.has(u)||l.replace(u),u.nodeValue===e+"")return;return void(u.nodeValue=t())}const n=e();n instanceof DocumentFragment?l.replace(n):(l.has(u)||l.replace(u),u.nodeValue!==n+""&&(u.nodeValue=n+"")),h=e})}}(t.get(a),e)}),r}function m(e,t){if("svg"===e.tag.toLowerCase())return function e(t,n){const r=document.createElementNS("http://www.w3.org/2000/svg",t.tag);let o=[];t.child.forEach(t=>{if(3===t.type)return;const{elem:c,dFns:i}=e(t,n);o=o.concat(i),r.appendChild(c)});for(const e of t.attrs){const{key:t,val:c}=e;g(r,t,c,n,o)}return{elem:r,dFns:o}}(e,t);const n=document.createElement(e.tag);let r=[];e.child.forEach(e=>{if(3===e.type){const o=h(e.content,t,n);return void(r=r.concat(o))}const{elem:o,dFns:c}=m(e,t);n.appendChild(o),r=r.concat(c)});for(const o of e.attrs){const{key:e,val:c}=o;g(n,e,c,t,r)}return{elem:n,dFns:r}}function g(e,t,n,r,i){if(t.startsWith("on")){const o=t.slice(2).toLowerCase();if("function"==typeof n)return void e.addEventListener(o,n);if("string"!=typeof n)return;if(l.test(n)){const t=r.get(RegExp.$2);"function"==typeof t&&e.addEventListener(o,t)}return}if("string"!=typeof n||!l.test(n))return"ref"===t?void y(e,n):"function"==typeof n?void i.push(()=>{v(e,t,o.getFuncVal(n))}):c.isState(n)?void i.push(()=>{v(e,t,o.GetValue(n))}):void v(e,t,n);const s=r.get(RegExp.$2);if("ref"!==t)switch(typeof s){case"undefined":break;case"function":i.push(()=>{const n=o.getFuncVal(s);v(e,t,n)});break;case"object":if(c.isState(s)){i.push(()=>{v(e,t,o.GetValue(s))});break}if(t===RegExp.$2){for(const t in s)if(s.hasOwnProperty(t)){const n=s[t];g(e,t,n,r,i)}break}default:v(e,t,s)}else y(e,s)}function y(e,t){"function"!=typeof t?Array.isArray(t)&&r.flatten(t).filter(e=>"function"==typeof e).forEach(t=>t(e)):t(e)}function v(e,t,n){if(void 0!==n)if(null!==n)if("muted"!==t||"video"!==e.localName)if("checked"!==t||"input"!==e.localName)if("boolean"!=typeof n){if("object"!=typeof n){if("class"!==t&&"className"!==t)"style"!==t?e.setAttribute(t,n):e.style.cssText=n;else if(e.classList){const t=e._oldCls,r=n.split(" ");r.filter(e=>!!e.trim()).forEach(t=>e.classList.add(t)),t&&t.filter(e=>!r.includes(e)).filter(e=>!!e.trim()).forEach(t=>e.classList.remove(t)),e._oldCls=r}}else if("style"===t)for(const t in n)if(n.hasOwnProperty(t)){const r=n[t];e.style[t]=r}}else n?e.setAttribute(t,""):e.removeAttribute(t);else e.checked=!!n;else e.muted=!0;else e.removeAttribute(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5),o=n(31);class c{constructor(e){this.fragKit=e}get firstChild(){return this.fragKit.node(0)}get childNodes(){return this.fragKit.nodes()}replaceChild(e,t){return this.fragKit.currentContainer().replaceChild(e,t),this.fragKit.replaceChild(e,t),e}insertBefore(e,t){return this.fragKit.currentContainer().insertBefore(e,t),this.fragKit.insertBefore(e,t),e}insertAfter(e,t){return t.nextSibling?this.insertBefore(e,t.nextSibling):this.appendChild(e)}appendChild(e){return this.fragKit.append(e),e}removeChild(e){this.fragKit.removeChild(e);try{return this.fragKit.currentContainer().removeChild(e)}catch(t){return e}}}function i(e,t,n){if(r.isUnDef(e))return;n.nextSibling?e.insertBefore(t,n):e.appendChild(t)}t.NewFrag=function(e,t){const n=r.UniqueId(),s=document.createComment(n);let a=[],l=null;t?i(e,s,t):e.appendChild(s);const u=()=>f()?s.parentNode||e:a.reduce((e,t)=>e||t.parentNode,null),f=()=>0===a.length,d={__id:n,has:e=>0!==a.length&&!!a.find(t=>t===e),replace:t=>{s.parentElement&&s.parentElement!==e&&(e=s.parentElement),0!==a.length&&s.parentElement&&(e=s.parentElement,s.parentElement.removeChild(s),l=s);let n=Array.isArray(t)?t:[t];n=r.flatten(n).map(e=>e instanceof DocumentFragment?Array.from(e.childNodes):e),n=r.flatten(n),0===n.length&&0!==a.length&&a[0].parentNode.insertBefore(s,a[0]),0!==n.length&&0===a.length&&(e=s.parentElement,l=s),e=u(),0!==a.length&&(l=a[a.length-1].nextElementSibling),o.patchChildren([...a],[...n],new c(d)),0!==a.length&&s.parentElement&&s.parentElement.removeChild(s),a=a.filter(e=>e)},append:t=>{if(s.parentElement&&s.parentElement!==e&&(e=s.parentElement),0!==a.length&&s.parentElement&&s.parentElement.removeChild(s),f()){if(s.parentNode)s.parentNode.insertBefore(t,s),s.parentNode.removeChild(s);else{const e=u();l&&l.parentElement===e?(e.insertBefore(t,l),l=null):e.appendChild(t)}t instanceof DocumentFragment?a=a.concat(Array.from(t.childNodes)):a.push(t)}else{const e=a[a.length-1];t instanceof DocumentFragment?a=a.concat(Array.from(t.childNodes)):a.push(t),i(e.parentNode,t,e)}},isEmpty:f,nodes:()=>a,node:e=>a[e],currentContainer:u,removeChild(e){const t=a.filter(t=>t!==e);0===t.length&&a[0].parentElement.insertBefore(s,a[0]),a=t},replaceChild(e,t){const n=a.findIndex(t=>t===e),r=a.findIndex(e=>e===t);a.splice(r,1,e),a.splice(n,1,t)},insertBefore(e,t){if(!t)return void a.push(e);const n=a.findIndex(e=>e===t);-1!==n?a.splice(n,1,e,t):a.push(e)}};return d}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.ELEMENT=0]="ELEMENT",e[e.TEXT=1]="TEXT",e[e.COMMENT=2]="COMMENT",e[e.FRAGMENT=3]="FRAGMENT",e[e.ATTRIBUTE=4]="ATTRIBUTE"}(r||(r={}));const o=e=>{switch(e.nodeType){case 1:return r.ELEMENT;case 2:return r.ATTRIBUTE;case 3:return r.TEXT;case 8:return r.COMMENT;case 11:return r.FRAGMENT;default:return r.ELEMENT}};t.patch=(e,t,n)=>{const i=o(t),s=o(e);if(e.$=t.$=e,i===s)switch(i){case r.ELEMENT:c(e,t);break;case r.TEXT:e.textContent=t.textContent;break;case r.COMMENT:case r.FRAGMENT:case r.ATTRIBUTE:break;default:throw new Error("wrong patch call")}else n.replaceChild(e,t)};const c=(e,n)=>{const r=Array.from(e.attributes).reduce((e,t)=>(e[t.name]=t)&&e,{}),o=Array.from(n.attributes).reduce((e,t)=>(e[t.name]=t)&&e,{});for(const t in o)if(o.hasOwnProperty(t)){const n=r[t],c=o[t];(c&&!n||n.value!==c.value)&&e.setAttribute(t,c.value)}for(const t in r)r.hasOwnProperty(t)&&(o.hasOwnProperty(t)||e.removeAttribute(t));t.patchChildren(Array.from(e.childNodes),Array.from(n.childNodes),e)};t.patchChildren=(e,n,r)=>{const o=e.length,c=n.length;switch(o){case 1:switch(c){case 1:t.patch(e[0],n[0],r);break;case 0:r.removeChild(e[0]);break;default:r.removeChild(e[0]);for(const e in n)if(n.hasOwnProperty(e)){const t=n[e];l(t,r,null,a.AFTER)}}break;case 0:switch(c){case 1:l(n[0],r,null,a.AFTER);break;case 0:break;default:for(const e in n)if(n.hasOwnProperty(e)){const t=n[e];l(t,r,n[Number(e)-1],a.AFTER)}}break;default:switch(c){case 1:for(const t of e)r.removeChild(t);l(n[0],r,null,a.AFTER);break;case 0:for(const t of e)r.removeChild(t);break;default:s(e,n,r)}}};const i=(e,t)=>e.constructor===t.constructor,s=(e,n,r)=>{let o=0,c=0,s=e.length-1,u=e[0],f=e[s],d=n.length-1,p=n[0],h=n[d];const m=new Map,g=new WeakSet;for(;o<=s&&c<=d;)if(g.has(u))u=e[++o];else if(g.has(u))f=e[--s];else if(i(u,p))t.patch(u,p,r),m.set(p,u),u=e[++o],p=n[++c];else if(i(f,h))t.patch(f,h,r),m.set(h,f),f=e[--s],h=n[--d];else if(i(u,h))t.patch(u,h,r),m.set(h,u),e[s].nextSibling?r.insertBefore(u,e[s].nextSibling):r.appendChild(u),u=e[++o],h=n[--d];else if(i(f,p))t.patch(f,p,r),m.set(p,f),r.insertBefore(f,u),f=e[--s],p=n[++c];else{let f=!1;for(let n=o;n<=s;n++){const o=e[n];if(i(o,p)&&!g.has(o)){f=!0,t.patch(o,p,r),m.set(p,o),g.add(o);break}}f||(m.has(n[c-1])?l(p,r,m.get(n[c-1]),a.AFTER):l(p,r,u,a.BEFORE)),p=n[++c]}o>s?n[c-1]?n.slice(c,d+1).reverse().map(e=>{l(e,r,n[c-1],a.AFTER)}):n.slice(c,d+1).map(e=>{l(e,r,null,a.BEFORE)}):c>d&&e.slice(o,s+1).filter(e=>!g.has(e)).map(e=>{r.removeChild(e)})};var a;!function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"}(a||(a={}));const l=(e,t,n,r)=>{r===a.BEFORE?t.insertBefore(e,n):((e,t,n)=>{t&&t.nextSibling?n.insertBefore(e,t.nextSibling):n.appendChild(e)})(e,n,t)}}])}));